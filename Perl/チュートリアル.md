*目次*
* [Hello perl](#Helloperl)
* [拡張子cgiとplの違い](#拡張子cgiとplの違い)
* [文字化け](#文字化け)
* [計算を行う](#計算を行う)
* [ランダム表示](#ランダム表示)
* [ランダム表示の文法](#ランダム表示の文法)

### Helloperl

```
#!C:\xampp\perl\bin\perl
print "Content-type: text/html\n\n";
print "Hello, perl!";
```

**実行結果**

`Hello, perl!`

**説明**

* 1行目の`#!`の後には、perlの実行ファイルのあるパスを入力する。上記のコードではxamppでperlをインストールした場合のデフォルトのパスを入力している。

* 2行目:サーバーからブラウザに情報が返ってくる時に必要なもの。

||意味|
|-|-|
|`Content-type`|ファイルの種類を識別するための情報のこと。メールやホームページのファイルと一緒に送られる。似たものに`MIMEタイプ`があるが、これも`Content-type`と同じような意味合いで使われる。|
|`text/html`|HTMLファイルを表す。|

**補足**

`Content-type`や`MIMEタイプ`は、**HTTPレスポンスヘッダ**と呼ばれる場所に記載される。

**HTTPレスポンスヘッダ**は、デベロッパーツールの「ネットワーク」の項目から「再読み込み」をすることで見ることができる。

HTTPレスポンスヘッダは、webブラウザさんがwebサーバーさんに「このページをください」と言って、webサーバーさんから「ほいよ」と返ってきた返事(**HTTPレスポンス**と呼ぶ)の中に含まれている。

### 拡張子cgiとplの違い

perlで書いたプログラムファイルの拡張子を`pl`から`cgi`に変えても、問題なく動作し実行結果も同じだったことから、どっちを使うのがよいのだろうと疑問に思った。

**結論は、CGIとしてPerlスクリプトを使うときは`.cgi`という拡張子を付ける。**

なのでcgiとして書くかどうか？を使い分けの判断基準にすると良い。

Perlは昔流行ったUNIXと呼ばれるLinuxの師匠に当たるOSに、デフォルトで実行環境が入っており、そのUNIXでは**拡張子にとくに特別な意味はなかった**そうである。

### 文字化け

以下のコードを実行したところ文字化けが発生した。

```
#!C:\xampp\perl\bin\perl.exe
print "Content-type: text/html\n\n";
$a=5;
$b=3+5;
print "こんにちわ";
```

**実行結果**

```
ã“ã‚“ã«ã¡ã‚
```

**対処法**

2行目を`print "Content-type: text/html;charset=utf-8\n\n";`に変更することで、対処できた。

**解説**

||意味|
|-|-|
|charset属性|charset(キャラセット)と読む。character setの略。**文字エンコード**を指定するための属性。|
|文字エンコード|コンピュータが文字情報を理解するために使う文字と数値(0と1の組み合わせ)の**対応表**のこと。もしくは文字データをコンピュータが理解できるように数値に変換すること。|

**補足**

HTMLで文字エンコードを指定するには、head内に以下のように書く。

```
<meta charset="UTF-8">
```

上記の書き方はHTML5の書き方で、HTML5より前のバージョンの書き方は以下になる。

```
<meta http-equiv="content-type" content="text/html; charset=文字コード">
```
`equiv`はequivalent(意味:相当する)の略。

**解説**
||意味|
|--|--|
|てすと|てすとああああ|


### 計算を行う

変数の書き方PHPと同じだね。

```
#!C:\xampp\perl\bin\perl.exe
print "Content-type: text/html;charset=utf-8\n\n";
$a=5;
$b=3+5;
print "計算結果:$b";
```

**実行結果**

```
計算結果:8
```

### ランダム表示

ランダムな数値の変化に合わせて、うんちを表示させるプログラム。

```
#!C:\xampp\perl\bin\perl.exe
print "Content-type: text/html;charset=utf-8\n\n";
$a = int(rand 6) +1;
print "$a";
while($a > 0) {
print "💩";
--$a; 
}
```

### ランダム表示の文法

||意味|
|-|-|
|「`.`」|連結演算子。「`.`」を使用すると文字列をつなげることができる。例:`print "こんにちわ"."$b"."さん"."<br>";`|
|`<br>`|改行に使う。|
|`int()`|int関数。小数点以下を切り捨てて、整数部分を返す。例:`$b = 3.14; print int($b);`|
|`rand()`|rand関数。引数に6が指定された場合、0以上6未満のランダムな値(小数点を含む)が生成される。例:`rand(6);`|
|`--$a`|`$a = $a - 1`の略。`$a--`と書いてもok。|



