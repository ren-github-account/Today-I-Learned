*目次*
* [なぜ親要素をrelativeにして子要素をabsoluteにするとレイヤーができるのか](#なぜ親要素をrelativeにして子要素をabsoluteにするとレイヤーができるのか)
* [](#)

### なぜ親要素をrelativeにして子要素をabsoluteにするとレイヤーができるのか

例えば以下のようなHTMLがあったとする。

```
<div class="layer-wrap">

<canvas id="background-layer" width="400" height="470"></canvas>
<canvas id="middle-layer" width="400" height="470"></canvas>
<canvas id="chara-layer" width="400" height="470"></canvas>
<canvas id="middle5-layer" width="400" height="470"></canvas>
<canvas id="middle2-layer" width="400" height="470"></canvas>
<canvas id="middle3-layer" width="400" height="470"></canvas>
<canvas id="middle4-layer" width="400" height="470"></canvas>

</div>
```

この時、CSSを以下のように書くと、`canvas要素`をレイヤー状に重ねて表示することができる。

```

.layer-wrap{
 width: 400px;
 height: 470px;

 position: relative;
}

.layer-wrap > canvas {
  position: absolute;
}
```
重なり方は、一番上の`canvas要素`が一番後ろになって、そこから手前に重なっていく。

では、なぜこのような動作をするのかについて見ていく。

まず、要素の`position`の値が`absolute`の時、直近の親要素の`position`が`relative`, `absolute`, `fixed`, `sticky`であれば、**その直近の親要素の位置を基準に位置を決定する。**

そして`position`の値が`absolute`の時、以下の性質がある。

それは、**「自分自身の元々の表示領域を確保しない」** というもの。

まとめると、親要素を`relative`にするのは**位置の基準を設定するため**で、子要素を`absolute`にすると **「自分自身の元々の表示領域が確保されない」ため要素がレイヤー状に重なっていく**ということになる。

一方、子要素を`relative`にすると **「元々の表示領域が確保される」** ため、レイヤー状に重ならなくなる。

本当に重ならないかどうかを確かめるには以下のコードを書く。

CSS
```
div.parent{
 height:300px;
 width:500px;
 background-color:#B0A695;
 position:relative;　/* ここで親要素にralativeを指定している*/
}

div.parent > div{
 background-color:#EBE3D5;
 position:relative; /* 子要素をabsoluteからrelativeに */
}
```

HTML
```

<body>


<div class="parent">
 <div class="child">こんにちわ</div>
 <div class="child2">hello!</div>
 <div class="child3">え!?</div>
</div>

</body>
```









